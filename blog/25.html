<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  
  <script src="/assets/js/close_copy.js"></script>
  

  
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  <title>Redis学习笔记</title>

  <link rel="shortcut icon" type="image/x-icon" href="/assets/private/icons/huangdayu.png" />
  <link rel="stylesheet" href="/assets/css/main.css" />
</head><body a="light">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/">博客首页</a><article>
  
  <h1 class="post-header">Redis学习笔记</h1>

  <p class="post-meta">
    <time datetime="2018-12-15 23:49:34 +0800">2018-12-15</time>
  </p>
  
  <h1 id="安装">安装</h1>

<h2 id="命令安装">命令安装</h2>

<h3 id="ubuntu">Ubuntu</h3>

<h4 id="安装-1">安装</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>redis-server
</code></pre></div></div>

<h3 id="centos">CentOS</h3>

<h4 id="安装-2">安装</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install </span>epel-release
yum <span class="nb">install </span>redis
<span class="nb">sudo </span>service redis start
</code></pre></div></div>

<!-- more -->

<h2 id="安装包安装">安装包安装</h2>

<h3 id="ubuntu-1">Ubuntu</h3>

<h4 id="安装-3">安装</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://download.redis.io/releases/redis-4.0.11.tar.gz
<span class="nb">tar</span> <span class="nt">-zxvf</span> redis-4.0.0.tar.gz
<span class="nb">cd </span>redis-4.0.0/
<span class="nb">sudo </span>make
<span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div></div>

<h3 id="centos-1">CentOS</h3>

<h4 id="安装-4">安装</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://download.redis.io/releases/redis-2.8.17.tar.gz
<span class="nb">tar </span>xzf redis-2.8.17.tar.gz
<span class="nb">cd</span> /usr/local/src/redis-2.8.17/
make
make <span class="nb">install
</span>vim redis.conf 
./src/redis-server redis.conf 
<span class="nb">sudo </span>netstat <span class="nt">-plutn</span> | <span class="nb">grep </span>6379
redis-cli
</code></pre></div></div>

<h1 id="管理">管理</h1>

<h2 id="服务管理">服务管理</h2>

<h3 id="启动">启动</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start redis-server
</code></pre></div></div>
<h3 id="重启">重启</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart redis-server
</code></pre></div></div>
<h3 id="停止">停止</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl stop redis-server
</code></pre></div></div>
<h3 id="查看状态">查看状态</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status redis-server
</code></pre></div></div>

<h2 id="启动-1">启动</h2>

<p>后台运行</p>

<p>首次</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/src/redis/redis-4.0.11/src/redis-server ../redis.conf&amp;
</code></pre></div></div>

<p>非首次</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/src/redis/redis-4.0.11/src/redis-server&amp;
</code></pre></div></div>

<h2 id="进入">进入</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/local/src/redis/redis-4.0.11/src/redis-cli
<span class="c"># 需要密码</span>
/usr/local/src/redis/redis-4.0.11/src/redis-cli <span class="nt">-p</span> 6379 <span class="nt">-a</span> redisPassword!
</code></pre></div></div>

<h2 id="命令设置密码">命令设置密码</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;config <span class="nb">set </span>requirepass redisPassword!
</code></pre></div></div>

<h2 id="配置文件设置密码">配置文件设置密码</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim redis.conf
:348 <span class="c">#348行</span>
requirepass redisPassword! <span class="c">#修改保存重启</span>
</code></pre></div></div>

<h2 id="查询密码">查询密码</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;config get requirepass
</code></pre></div></div>

<h2 id="认证密码">认证密码</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; auth redisPassword!
</code></pre></div></div>

<h2 id="登录">登录</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redis-cli <span class="nt">-p</span> 6379 <span class="nt">-a</span> redisPassword!
</code></pre></div></div>

<h2 id="查看">查看</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## 查看是否已经自动启动</span>
ps <span class="nt">-aux</span> | <span class="nb">grep </span>redis
<span class="c">## 查看是否已经监听端口</span>
netstat <span class="nt">-nlt</span> | <span class="nb">grep </span>6379
</code></pre></div></div>

<h2 id="修改配置文件">修改配置文件</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/redis/redis.conf
</code></pre></div></div>

<h2 id="无密码登录">无密码登录</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redis-cli
</code></pre></div></div>

<h2 id="有密码登录">有密码登录</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redis-cli <span class="nt">-a</span> root <span class="nt">-h</span> yibuwulianwang.com
</code></pre></div></div>

<h1 id="常用命令">常用命令</h1>

<h2 id="查看所有的key列表">查看所有的key列表</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;keys <span class="k">*</span>
</code></pre></div></div>

<h2 id="增加一条记录key1">增加一条记录key1</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;set key1 <span class="s2">"hello"</span>
</code></pre></div></div>

<h2 id="打印记录">打印记录</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;get key1
</code></pre></div></div>

<h2 id="增加一条数字记录key2">增加一条数字记录key2</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;set key2 1
</code></pre></div></div>

<h2 id="让值数字自增">让值（数字）自增</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;INCR key2
</code></pre></div></div>

<h2 id="增加一个列表记录key3">增加一个列表记录key3</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;LPUSH key3 a
</code></pre></div></div>

<h2 id="从左边插入列表">从左边插入列表</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;LPUSH key3 b
</code></pre></div></div>

<h2 id="从右边插入列表">从右边插入列表</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;RPUSH key3 c
</code></pre></div></div>
<h2 id="打印列表记录按从左到右的顺序">打印列表记录，按从左到右的顺序</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;LRANGE key3 0 3
</code></pre></div></div>

<h2 id="增加一个哈希记表录key4">增加一个哈希记表录key4</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;HSET key4 name <span class="s2">"John Smith"</span>
</code></pre></div></div>

<h2 id="在哈希表中插入email的key和value的值">在哈希表中插入，email的Key和Value的值</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;HSET key4 email <span class="s2">"abc@gmail.com"</span>
</code></pre></div></div>

<h2 id="打印哈希表中name为key的值">打印哈希表中，name为key的值</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;HGET key4 name
</code></pre></div></div>

<h2 id="打印整个哈希表">打印整个哈希表</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;HGETALL key4
</code></pre></div></div>

<h2 id="增加一条哈希表记录key5一次插入多个key和value的值">增加一条哈希表记录key5，一次插入多个Key和value的值</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;HMSET key5 username antirez password P1pp0 age 3
</code></pre></div></div>

<h2 id="打印哈希表中username和age为key的值">打印哈希表中，username和age为key的值</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;HMGET key5 username age
</code></pre></div></div>

<h2 id="打印完整的哈希表记录">打印完整的哈希表记录</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;HGETALL key5
</code></pre></div></div>

<h2 id="查看所有的key列表-1">查看所有的key列表</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;127.0.0.1:6379&gt;keys <span class="k">*</span>
</code></pre></div></div>

<h2 id="删除key1key5">删除key1,key5</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt;del key1
</code></pre></div></div>

<h1 id="数据类型">数据类型</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: left">类型</th>
      <th style="text-align: left">简介</th>
      <th style="text-align: left">特性</th>
      <th style="text-align: left">可存储的值</th>
      <th style="text-align: left">操作</th>
      <th style="text-align: left">场景</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>String</strong></td>
      <td style="text-align: left">字符串，二进制安全</td>
      <td style="text-align: left">可以包含任何数据,比如jpg图片或者序列化的对象,一个键最大能存储512M</td>
      <td style="text-align: left">字符串，整，浮点数</td>
      <td style="text-align: left">1. 对整个字符串或者字符串中的一部分执行操作，2. 对整数或浮点数执行自增或自减操作</td>
      <td style="text-align: left">缓存、限流、计算器、分布式锁、分布式session</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Hash</strong></td>
      <td style="text-align: left">字典，键值对集合,即编程语言中的Map类型</td>
      <td style="text-align: left">适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去)</td>
      <td style="text-align: left">包含键对值的无序散列表</td>
      <td style="text-align: left">1. 添加，获取，移除单个键对值；2. 获取所有键对值；3. 检查某个键对值是否存在</td>
      <td style="text-align: left">存储、读取、修改用户信息、用户主页访问量、组合查询</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>List</strong></td>
      <td style="text-align: left">列表，链表(双向链表)</td>
      <td style="text-align: left">增删快,提供了操作某一段元素的API</td>
      <td style="text-align: left">链表</td>
      <td style="text-align: left">1. 从两端压入或者弹出元素；2. 读取多个或者单个元素进行修剪；3. 只保留一个范围内的元素</td>
      <td style="text-align: left">最新消息排行等功能(比如朋友圈的时间线) 、消息队列、时间轴</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Set</strong></td>
      <td style="text-align: left">集合，哈希表实现,元素不重复</td>
      <td style="text-align: left">1、添加、删除,查找的复杂度都是O(1) 2、为集合提供了求交集、并集、差集等操作</td>
      <td style="text-align: left">无序集合</td>
      <td style="text-align: left">1. 添加，获取，移除单个元素；2. 检查一个元素是否存在与集合中；3.计算交集，并集，差集；4. 从集合里面随机获取元素</td>
      <td style="text-align: left">共同好友 、利用唯一性,统计访问网站的所有独立ip 、好友推荐时,根据tag求交集,大于某个阈值就可以推荐，赞，踩，标签，好友关系</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>ZSet</strong></td>
      <td style="text-align: left">Sorted Set(有序集合)，将Set中的元素增加一个权重参数score,元素按score有序排列</td>
      <td style="text-align: left">数据插入集合时,已经进行天然排序</td>
      <td style="text-align: left">有序集合</td>
      <td style="text-align: left">1. 添加，获取，移除单个元素；2. 根据分值范围或成员来获取元素；3. 计算一个键的排名</td>
      <td style="text-align: left">排行榜 、带权重的消息队列</td>
    </tr>
  </tbody>
</table>

<h1 id="监控中心">监控中心</h1>

<p><code class="language-plaintext highlighter-rouge">redis-monitor</code>:使用<code class="language-plaintext highlighter-rouge">Python2</code>开发，默认端口是<code class="language-plaintext highlighter-rouge">9527</code></p>

<h2 id="安装-5">安装</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>redis-monitor
</code></pre></div></div>

<h2 id="初始化">初始化</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redis-monitor init
</code></pre></div></div>

<h2 id="后台运行">后台运行</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">nohup </span>redis-monitor start <span class="o">&gt;</span> redis-monitor-2018-12-15.log &amp;
</code></pre></div></div>

<h1 id="参考文献">参考文献</h1>

<p><a href="http://blog.fens.me/linux-redis-install/">在Ubuntu中安装Redis</a></p>
<br/>
<a style="display: block;text-align:right;" href="/">博客首页</a>
<br/>
<p style="display: block;text-align:center;">©2012-2023 huangdayu.cn(大鱼叔叔的博客) 版权所有，未经授权，不得转载。</p>
<br/></article>


      </div>
    </main>
  </body>
</html>